---
name: fund-holdings
description: 获取基金最新持仓信息，支持查询前1-20条重仓股及其持仓比例，并提供实时股票涨跌数据和基金估值预测。默认查询前20条重仓股，用户可以通过参数指定查询条数（如"前10条"、"top 15"）。仅支持通过基金代码查询，使用天天基金网的公开数据源。适用于用户查询"基金xxxx的最新持仓"、"查看某基金的前N条重仓股"等场景。
---

# 基金持仓查询技能

## 功能概述
- 查询基金的最新前1-20条重仓股（默认20条）
- 显示每只股票的持仓比例、持仓市值和**实时涨跌幅度**
- **提供基金估值预测**（基于重仓股加权平均涨跌幅计算）
- 只返回最新公布的持仓数据（季度更新）
- 仅支持基金代码查询（6位数字）
- 支持自定义查询条数参数

## 使用方法
当用户请求查询基金持仓时，使用以下步骤：

1. **解析用户输入**：提取基金代码（6位数字）和查询条数参数
2. **调用查询脚本**：使用 `scripts/fund_holdings_main.py` 脚本
3. **格式化输出**：以清晰的表格形式展示重仓股及持仓比例、实时涨跌数据

### 参数支持
- **默认行为**：查询前20条重仓股
- **中文参数**：支持"前10条"、"前15大"、"前5个"等格式
- **英文参数**：支持"top 10"、"top 15"等格式
- **限制**：最多支持查询20条（天天基金网API限制）

## 数据源
主要使用两个数据源：

1. **天天基金网**（fund.eastmoney.com）：
   - 提供免费的基金持仓信息
   - 数据更新及时（季报发布后）
   - 无需登录即可访问
   - 最多支持查询前20条重仓股信息

2. **腾讯股票API**（qt.gtimg.cn）：
   - 提供股票实时涨跌幅度数据
   - 自动识别股票市场（沪市/深市）
   - 实时性高，响应速度快

## 输出格式
返回结果包含：
- 基金基本信息（名称、代码、最新报告期）
- **基金估值预测涨跌幅**（基于重仓股加权计算）
- 重仓股表格（股票代码、股票名称、持仓比例、**实时涨跌幅度**）
- 数据更新日期说明
- 实际查询的条数说明
- **重要提示**：基金估值预测仅供参考，实际净值以基金公司公布为准

## 示例查询
- "查询基金005827的最新持仓" → 返回前20条
- "查询基金005827前10条重仓股" → 返回前10条
- "查询基金005827 top 15" → 返回前15条

## 错误处理
- 如果基金代码无效，返回错误提示
- 如果基金无持仓数据（如货币基金），说明原因
- 如果网络请求失败，提供备用方案提示
- 如果无法获取股票涨跌数据，显示"--"